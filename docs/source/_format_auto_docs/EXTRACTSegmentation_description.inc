.. _sec-EXTRACTSegmentation:

EXTRACTSegmentation
^^^^^^^^^^^^^^^^^^^

**Overview:** EXTRACT configuration parameters


``EXTRACTSegmentation`` extends ``ImageSegmentation`` and includes all elements of :ref:`ImageSegmentation <sec-ImageSegmentation>` with the following additions or changes.



- **Extends:** :ref:`ImageSegmentation <sec-ImageSegmentation>`
- **Primitive Type:** Group
- **Inherits from:** :ref:`ImageSegmentation <sec-ImageSegmentation>`, :ref:`NWBDataInterface <sec-NWBDataInterface>`, :ref:`NWBContainer <sec-NWBContainer>`, :ref:`Container <sec-Container>`
- **Source filename:** ndx-extract.extensions.yaml
- **Source Specification:** see :numref:`sec-EXTRACTSegmentation-src`


.. figure:: ./_format_auto_docs/EXTRACTSegmentation.*
    :alt: EXTRACTSegmentation




.. tabularcolumns:: |p{4cm}|p{1cm}|p{10cm}|
.. _table-EXTRACTSegmentation-data:

.. table:: Datasets, Links, and Attributes contained in <EXTRACTSegmentation>
    :class: longtable

    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Id                               | Type        | Description                                                                                                                                                                                                                         |
    +==================================+=============+=====================================================================================================================================================================================================================================+
    | <EXTRACTSegmentation>            | Group       | Top level Group for <EXTRACTSegmentation>                                                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Neurodata Type:** :ref:`EXTRACTSegmentation <sec-EXTRACTSegmentation>`                                                                                                                                                          |
    |                                  |             | - **Extends:** :ref:`ImageSegmentation <sec-ImageSegmentation>`                                                                                                                                                                     |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .preprocess                      | Attribute   | Boolean flag indicating data preprocessing before main EXTRACT function                                                                                                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** preprocess                                                                                                                                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .fix_zero_FOV_strips             | Attribute   | Boolean flag. Find and fix spatial slices that are occasionally zero due to frame registration during preprocessing.                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** fix_zero_FOV_strips                                                                                                                                                                                                     |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .medfilt_outlier_pixels          | Attribute   | Boolean flag determining whether outlier pixels in the movie should be replaced with their neighborhood median.                                                                                                                     |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** medfilt_outlier_pixels                                                                                                                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .skip_dff                        | Attribute   | Boolean flag. Skip Df/F calculation in preprocessing.                                                                                                                                                                               |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** skip_dff                                                                                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .baseline_quantile               | Attribute   | Baseline quantile for Df/F calculation in preprocessing.                                                                                                                                                                            |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** baseline_quantile                                                                                                                                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .skip_highpass                   | Attribute   | Boolean flag. Skip highpass filtering in preprocessing.                                                                                                                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** skip_highpass                                                                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .spatial_highpass_cutoff         | Attribute   | Cutoff determining the strength of butterworth spatial filtering of the movie. Values defined relative to the average cell radius.                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** spatial_highpass_cutoff                                                                                                                                                                                                 |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .temporal_denoising              | Attribute   | Boolean flag that determines whether to apply temporal wavelet denoising.                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** temporal_denoising                                                                                                                                                                                                      |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .remove_background               | Attribute   | Boolean flag that determines whether to subtract the (spatial) background (largest spatiotemporal mode of the movie matrix).                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** remove_background                                                                                                                                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .avg_cell_radius                 | Attribute   | Radius estimate for an average cell in the movie.                                                                                                                                                                                   |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** avg_cell_radius                                                                                                                                                                                                         |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .num_partitions_x                | Attribute   | Number of movie partitions in x dimension.                                                                                                                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** uint                                                                                                                                                                                                               |
    |                                  |             | - **Required:** False                                                                                                                                                                                                               |
    |                                  |             | - **Name:** num_partitions_x                                                                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .num_partitions_y                | Attribute   | Number of movie partitions in y dimension.                                                                                                                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** uint                                                                                                                                                                                                               |
    |                                  |             | - **Required:** False                                                                                                                                                                                                               |
    |                                  |             | - **Name:** num_partitions_y                                                                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .trace_output_option             | Attribute   | Raw or non-negative output traces                                                                                                                                                                                                   |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** text                                                                                                                                                                                                               |
    |                                  |             | - **Name:** trace_output_option                                                                                                                                                                                                     |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .dendrite_aware                  | Attribute   | Boolean flag, set it to true if dendrites exist in the movie & are desired in the output.                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** dendrite_aware                                                                                                                                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .crop_circular                   | Attribute   | Boolean flag. For microendoscopic movies, set it to true for automatically cropping out the region outside the circular imaging region.                                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** crop_circular                                                                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .use_sparse_arrays               | Attribute   | Boolean flag. If set to true, then the output cell images will be saved as sparse arrays                                                                                                                                            |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** use_sparse_arrays                                                                                                                                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .compact_output                  | Attribute   | Boolean flag. If set to true, then the output will not include bad components that were found but then eliminated                                                                                                                   |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** compact_output                                                                                                                                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .hyperparameter_tuning_flag      | Attribute   | Boolean flag indicating internal hyperparameter tuning.                                                                                                                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** hyperparameter_tuning_flag                                                                                                                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .remove_duplicate_cells          | Attribute   | For movies processed in multiple partitions, this flag controls duplicate removal in the overlap regions.                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** remove_duplicate_cells                                                                                                                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .max_iter                        | Attribute   | Maximum number of alternating estimation iterations.                                                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** uint                                                                                                                                                                                                               |
    |                                  |             | - **Name:** max_iter                                                                                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .cellfind_min_snr                | Attribute   | Minimum peak SNR value for an object to be considered as a cell.                                                                                                                                                                    |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** cellfind_min_snr                                                                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .cellfind_max_steps              | Attribute   | Maximum number of cell candidate initialization during cell finding step.                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** int                                                                                                                                                                                                                |
    |                                  |             | - **Name:** cellfind_max_steps                                                                                                                                                                                                      |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .cellfind_kappa_std_ratio        | Attribute   | Kappa will be set to this times the noise std for the component-wise EXTRACT during initialization.                                                                                                                                 |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** cellfind_kappa_std_ratio                                                                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .cellfind_filter_type            | Attribute   | Type of the spatial smoothing filter used for cell finding.                                                                                                                                                                         |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** text                                                                                                                                                                                                               |
    |                                  |             | - **Name:** cellfind_filter_type                                                                                                                                                                                                    |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .cellfind_numpix_threshold       | Attribute   | During cell finding, objects with an area < cellfind_numpix_threshold are discarded.                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** cellfind_numpix_threshold                                                                                                                                                                                               |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .moving_radius                   | Attribute   | Radius of moving average filter in the case when cellfind_filter_type = moveavg (moving average)                                                                                                                                    |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** moving_radius                                                                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .init_with_gaussian              | Attribute   | Boolean flag. If true, then during cell finding, each cell is initialized with a gaussian shape prior to robust estimation. If false, then initialization is done with a correlation image (preferred for movies with dendrites).   |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** init_with_gaussian                                                                                                                                                                                                      |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .high2low_brightness_ratio       | Attribute   | Threshold for ratio of pixel compared to most bright region in FOV. Used to determine when to stop cell finding process.                                                                                                            |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** high2low_brightness_ratio                                                                                                                                                                                               |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .kappa_std_ratio                 | Attribute   | Kappa will be set to this times the noise std during the cell refinement process. Cell refinement parameter.                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** kappa_std_ratio                                                                                                                                                                                                         |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .T_dup_corr_thresh               | Attribute   | Through alternating estimation, cells that have higher trace correlation than T_dup_corr_thresh are eliminated. Cell refinement parameter.                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** T_dup_corr_thresh                                                                                                                                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .S_dup_corr_thresh               | Attribute   | Through alternating estimation, cells that have higher image correlation than S_dup_corr_thresh are eliminated. Cell refinement parameter.                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** S_dup_corr_thresh                                                                                                                                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .temporal_corrupt_thresh         | Attribute   | Threshold for temporal corruption index. Traces above this threshold are eliminated duirng alternating minimization routine. Cell refinement parameter.                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** temporal_corrupt_thresh                                                                                                                                                                                                 |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .spatial_corrupt_thresh          | Attribute   | Threshold for spatial corruption index. Images above this threshold are eliminated duirng alternating minimization routine. Cell refinement parameter.                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** spatial_corrupt_thresh                                                                                                                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .T_min_snr                       | Attribute   | Threshold for temporal SNR. Cells with temporal SNR below this value will be eliminated. Cell refinement parameter.                                                                                                                 |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** T_min_snr                                                                                                                                                                                                               |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .size_lower_limit                | Attribute   | Lower size limit for found cells. Cell refinement parameter.                                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** size_lower_limit                                                                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .size_upper_limit                | Attribute   | Lower size limit for found cells. Cell refinement parameter.                                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** size_upper_limit                                                                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .eccent_thresh                   | Attribute   | Upper limit of eccentricity for found cells. Cell refinement parameter.                                                                                                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** eccent_thresh                                                                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .low_ST_index_thresh             | Attribute   | Lower limit of spatiotemporal activity index. Cell refinement parameter.                                                                                                                                                            |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** low_ST_index_thresh                                                                                                                                                                                                     |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .high_ST_index_thresh            | Attribute   | Upper limit limit of spatiotemporal activity index. Cell refinement parameter.                                                                                                                                                      |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** high_ST_index_thresh                                                                                                                                                                                                    |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .low_ST_corr_thresh              | Attribute   | Lower limit of spatiotemporal corelation. Cell refinement parameter.                                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** low_ST_corr_thresh                                                                                                                                                                                                      |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .confidence_thresh               | Attribute   | Confidence threhsold for found cells. Cell refinement parameter.                                                                                                                                                                    |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** confidence_thresh                                                                                                                                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .downsample_time_by              | Attribute   | Time downsampling factor. If set to auto downsampling factor based on avg cell radius and avg calcium event time constant.                                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** text                                                                                                                                                                                                               |
    |                                  |             | - **Name:** downsample_time_by                                                                                                                                                                                                      |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .min_tau_after_downsampling      | Attribute   | Minimum event tau after downsampling. Used when downsample_time_by = auto                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** min_tau_after_downsampling                                                                                                                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .downsample_space_by             | Attribute   | Spatial downsampling factor. If set to auto downsampling factor based on avg cell radius and avg calcium event time constant.                                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** text                                                                                                                                                                                                               |
    |                                  |             | - **Name:** downsample_space_by                                                                                                                                                                                                     |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .min_radius_after_downsampling   | Attribute   | Minimum avg radius after downsampling. Used when downsample_space_by = auto.                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** min_radius_after_downsampling                                                                                                                                                                                           |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .reestimate_S_if_downsampled     | Attribute   | Boolean flag. When set to true, images are re-estimated from full movie at the end. When false, images are upsampled by interpolation.                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** reestimate_S_if_downsampled                                                                                                                                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .reestimate_T_if_downsampled     | Attribute   | Boolean flag. When set to true, traces are re-estimated from full movie at the end. When false, traces are upsampled by interpolation.                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** reestimate_T_if_downsampled                                                                                                                                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .adaptive_kappa                  | Attribute   | Boolean flag. If true, then during cell finding, the robust esimation loss will adaptively set its robustness parameter                                                                                                             |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** adaptive_kappa                                                                                                                                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .smoothing_ratio_x2y             | Attribute   | If the movie contains mainly objects that are elongated in one dimension (e.g. dendrites), this parameter is useful for more smoothing in either x or y dimension.                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** smoothing_ratio_x2y                                                                                                                                                                                                     |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .spatial_lowpass_cutoff          | Attribute   | Cutoff determining the strength of butterworth spatial filtering of the movie. Values defined relative to the average cell radius.                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** spatial_lowpass_cutoff                                                                                                                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .smooth_T                        | Attribute   | Boolean flag indicating whether calculated traces are smoothed using median filtering.                                                                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** smooth_T                                                                                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .smooth_S                        | Attribute   | Boolean flag indicating whether calculated images are smoothed using a 2-D Gaussian filter.                                                                                                                                         |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** smooth_S                                                                                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .l1_penalty_factor               | Attribute   | Strength of l1 regularization penalty to be applied when estimating the temporal components.                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** l1_penalty_factor                                                                                                                                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .max_iter_S                      | Attribute   | Maximum number of iterations for S estimation steps                                                                                                                                                                                 |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** uint                                                                                                                                                                                                               |
    |                                  |             | - **Name:** max_iter_S                                                                                                                                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .max_iter_T                      | Attribute   | Maximum number of iterations for T estimation steps                                                                                                                                                                                 |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** uint                                                                                                                                                                                                               |
    |                                  |             | - **Name:** max_iter_T                                                                                                                                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .TOL_sub                         | Attribute   | If the 1-step relative change in the objective within each T and S optimization is less than this, the respective optimization is terminated.                                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** TOL_sub                                                                                                                                                                                                                 |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .TOL_main                        | Attribute   |  If the relative change in the main objective function between 2 consecutive alternating minimization steps is less than this, cell extraction is terminated.                                                                       |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** TOL_main                                                                                                                                                                                                                |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .T_lower_snr_threshold           | Attribute   | Lower SNR threshold for found traces.                                                                                                                                                                                               |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** float32                                                                                                                                                                                                            |
    |                                  |             | - **Name:** T_lower_snr_threshold                                                                                                                                                                                                   |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .save_all_found                  | Attribute   | Boolean flag. Save all spatial and temporal components found                                                                                                                                                                        |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Data Type:** bool                                                                                                                                                                                                               |
    |                                  |             | - **Name:** save_all_found                                                                                                                                                                                                          |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .S_init                          | Dataset     | Cell images provided to algorithm as the initial set of cells, skipping its native initialization                                                                                                                                   |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Quantity:** 0 or 1                                                                                                                                                                                                              |
    |                                  |             | - **Data Type:** double                                                                                                                                                                                                             |
    |                                  |             | - **Dimensions:** ['heightxwidth', 'num_cells']                                                                                                                                                                                     |
    |                                  |             | - **Shape:** [None, None]                                                                                                                                                                                                           |
    |                                  |             | - **Name:** S_init                                                                                                                                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .T_init                          | Dataset     | Cell traces provided to algorithm as the initial set of traces, skipping its native initialization                                                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Quantity:** 0 or 1                                                                                                                                                                                                              |
    |                                  |             | - **Data Type:** double                                                                                                                                                                                                             |
    |                                  |             | - **Dimensions:** ['num_cells', 'timepoints']                                                                                                                                                                                       |
    |                                  |             | - **Shape:** [None, None]                                                                                                                                                                                                           |
    |                                  |             | - **Name:** T_init                                                                                                                                                                                                                  |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .movie_mask                      | Dataset     | Movie mask.                                                                                                                                                                                                                         |
    |                                  |             |                                                                                                                                                                                                                                     |
    |                                  |             | - **Quantity:** 0 or 1                                                                                                                                                                                                              |
    |                                  |             | - **Data Type:** double                                                                                                                                                                                                             |
    |                                  |             | - **Dimensions:** ['height', 'width']                                                                                                                                                                                               |
    |                                  |             | - **Shape:** [None, None]                                                                                                                                                                                                           |
    |                                  |             | - **Name:** movie_mask                                                                                                                                                                                                              |
    |                                  |             |                                                                                                                                                                                                                                     |
    +----------------------------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+



